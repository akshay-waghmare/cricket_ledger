<%- include('partials/header') %>

<div class="jumbotron">
  <h1 class="display-4">Cricket Bookmaker App</h1>
  <p class="lead">Manage cricket matches, bets, and track exposures</p>
  <hr class="my-4">
  <p>This system allows you to create match ledgers, add users, place bets, calculate exposures, and settle matches with profit and loss calculations.</p>
</div>

<div class="row mt-4">
  <div class="col-md-6">
    <div class="card">
      <div class="card-header bg-primary text-white">
        <h5>Active Matches</h5>
      </div>
      <div class="card-body">
        <% if (matches && matches.length > 0) { %>
          <ul class="list-group">
            <% matches.forEach(match => { %>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <strong><%= match.match_id %></strong>
                  <span class="text-muted"> - <%= match.teams.join(' vs ') %></span>
                </div>
                <a href="/matches/<%= match.match_id %>" class="btn btn-sm btn-outline-primary">View</a>
              </li>
            <% }); %>
          </ul>
          <a href="/matches" class="btn btn-link">View all matches</a>
        <% } else { %>
          <p>No matches available.</p>
          <a href="/matches/create" class="btn btn-primary">Create a Match</a>
        <% } %>
      </div>
    </div>
  </div>
  
  <div class="col-md-6">
    <div class="card">
      <div class="card-header bg-success text-white">
        <h5>Users</h5>
      </div>
      <div class="card-body">
        <% if (users && users.length > 0) { %>
          <ul class="list-group">
            <% users.forEach(user => { %>
              <li class="list-group-item d-flex justify-content-between align-items-center">
                <div>
                  <strong><%= user.id %></strong>
                  <span class="text-muted"> - Balance: <%= user.balance.toFixed(2) %></span>
                </div>
                <a href="/users/<%= user.id %>" class="btn btn-sm btn-outline-success">View</a>
              </li>
            <% }); %>
          </ul>
          <a href="/users" class="btn btn-link">View all users</a>
        <% } else { %>
          <p>No users available.</p>
          <a href="/users/create" class="btn btn-success">Create a User</a>
        <% } %>
      </div>
    </div>
  </div>
</div>

<%- include('partials/footer') %>